!(function (g) {
    "use strict";
    g(".priority-nav").each(function () {
        g(this);
        !(function (e) {
            var t = g(e),
                d = (g('> ul > li:not(".more")', t), t.parent()),
                o = {},
                h = 0,
                u = 0,
                l = (g("> ul > li:first", t), g('ul.menu > li:not(".more")', t)),
                m = g("ul.menu > li.menu-item.more", t),
                f = g("> .sub-menu", m),
                w = m.outerWidth(!0),
                i = t.siblings(),
                c = 0;
            (u += 2 * w),
                i.each(function () {
                    u += g(this).outerWidth(!0);
                }),
                l.each(function (e) {
                    var t = g(this),
                        i = Math.round(t.outerWidth());
                    t.data("og-width", i), (o[e] = i);
                }),
                t.data("items-width", JSON.stringify(o));
            var a = function () {
                (h = d.outerWidth(!0)), (c = h - u);
                var e,
                    t = 0,
                    i = 0,
                    a = 0,
                    r = "";
                for (var n in o)
                    if (((t += i = o[n]), (e = l.eq(n)), t < c)) e.removeClass("hidden");
                    else {
                        e.addClass("hidden");
                        var s = g("> a", e).attr("target") || !1;
                        s && (s = ' target="' + s + '"'), (r += '<li class="menu-item" data-index="' + n + '"><a href="' + (g("> a", e).attr("href") || "") + '"' + s + "><span>" + g("> a", e).text() + "</span></a></li>"), a++;
                    }
                r ? (1 === a && i <= w ? (m.addClass("hidden"), e.removeClass("hidden")) : (g("i", r).remove(), m.removeClass("hidden"), f.html(r))) : m.addClass("hidden");
            };
            a(), t.removeClass("loading").addClass("loaded");
        })(this);
    });
})(window.jQuery);
